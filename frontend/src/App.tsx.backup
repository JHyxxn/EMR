import React, { useState, useEffect } from 'react';
import './App.css';

export default function App() {
    console.log("App component rendering...");
    
    const [isAuthenticated, setIsAuthenticated] = useState(false);
    const [loading, setLoading] = useState(true);
    const [showNewPatientModal, setShowNewPatientModal] = useState(false);
    const [currentPage, setCurrentPage] = useState('home');
    
    useEffect(() => {
        console.log("App useEffect running...");
        
        // 토큰이 있으면 로그인된 것으로 간주
        const token = localStorage.getItem('token');
        if (token) {
            setIsAuthenticated(true);
        }
        setLoading(false);
    }, []);
    
    // 로딩 중인 경우
    if (loading) {
        return (
            <div style={{
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                height: "100vh",
                background: "#f8fafc",
                fontFamily: "ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto"
            }}>
                <div style={{
                    textAlign: "center",
                    padding: "40px"
                }}>
                    <h1 style={{
                        fontSize: "32px",
                        fontWeight: 700,
                        color: "#374151",
                        marginBottom: "16px"
                    }}>
                        Dr.App • EMR
                    </h1>
                    <p style={{
                        fontSize: "16px",
                        color: "#6b7280"
                    }}>
                        로딩 중...
                    </p>
                </div>
            </div>
        );
    }
    
    // 로그인하지 않은 경우 로그인 화면 표시
    if (!isAuthenticated) {
        return (
            <div style={{
                display: "flex",
                alignItems: "center",
                justifyContent: "center",
                height: "100vh",
                background: "#f8fafc",
                fontFamily: "ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto"
            }}>
                <div style={{
                    textAlign: "center",
                    padding: "40px"
                }}>
                    <h1 style={{
                        fontSize: "32px",
                        fontWeight: 700,
                        color: "#374151",
                        marginBottom: "16px"
                    }}>
                        Dr.App • EMR
                    </h1>
                    <p style={{
                        fontSize: "16px",
                        color: "#6b7280",
                        marginBottom: "32px"
                    }}>
                        의료진을 위한 전자 의무기록 시스템
                    </p>
                    <button
                        onClick={() => {
                            // 임시로 로그인 처리
                            localStorage.setItem('token', 'temp-token');
                            setIsAuthenticated(true);
                        }}
                        style={{
                            padding: "12px 24px",
                            background: "#3b82f6",
                            color: "white",
                            border: "none",
                            borderRadius: "8px",
                            fontSize: "16px",
                            fontWeight: 600,
                            cursor: "pointer",
                            transition: "background-color 0.2s"
                        }}
                        onMouseEnter={(e) => (e.target as HTMLElement).style.background = "#2563eb"}
                        onMouseLeave={(e) => (e.target as HTMLElement).style.background = "#3b82f6"}
                    >
                        로그인 (테스트)
                    </button>
                </div>
            </div>
        );
    }
    
    // 로그인된 경우 메인 화면 표시
    return (
        <div style={{
            display: "flex",
            flexDirection: "column",
            height: "100vh",
            background: "#f8fafc",
            fontFamily: "ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto"
        }}>
            {/* 헤더 */}
            <header style={{
                display: "flex",
                alignItems: "center",
                padding: "16px 24px",
                background: "white",
                borderBottom: "1px solid #e2e8f0",
                height: "64px",
                boxShadow: "0 1px 3px rgba(0,0,0,0.1)"
            }}>
                {/* 왼쪽: 로고 */}
                <div style={{ 
                    fontSize: 20, 
                    fontWeight: 700, 
                    color: "#0ea5e9",
                    minWidth: "200px"
                }}>
                    Dr.App · 오늘
                </div>
                
                {/* 중앙: 검색바 + 신규 환자 버튼 */}
                <div style={{ 
                    display: "flex", 
                    alignItems: "center", 
                    gap: "16px",
                    flex: 1,
                    justifyContent: "flex-start",
                    maxWidth: "800px",
                    marginRight: "16px"
                }}>
                    <div style={{ flex: 1, maxWidth: "600px" }}>
                        <input 
                            type="text"
                            placeholder="환자 검색..."
                            style={{
                                width: "100%",
                                padding: "8px 12px",
                                border: "1px solid #d1d5db",
                                borderRadius: "6px",
                                fontSize: "14px"
                            }}
                        />
                    </div>
                    <button 
                        onClick={() => setShowNewPatientModal(true)}
                        style={{
                            height: 40,
                            padding: "0 16px",
                            border: "1px solid #3b82f6",
                            borderRadius: 8,
                            background: "#3b82f6",
                            color: "white",
                            cursor: "pointer",
                            fontSize: 14,
                            display: "flex",
                            alignItems: "center",
                            gap: 8,
                            fontWeight: 500,
                            transition: "all 0.2s",
                            whiteSpace: "nowrap"
                        }}
                        onMouseEnter={(e) => e.currentTarget.style.background = "#2563eb"}
                        onMouseLeave={(e) => e.currentTarget.style.background = "#3b82f6"}
                    >
                        <span style={{ fontSize: 18 }}>+</span>
                        신규 환자
                    </button>
                </div>
                
                {/* 오른쪽: 사용자 정보 */}
                <div style={{ 
                    display: "flex", 
                    alignItems: "center", 
                    gap: "8px",
                    marginLeft: "auto"
                }}>
                    <span style={{ fontSize: 14, color: "#6b7280" }}>
                        testuser님
                    </span>
                    <button 
                        onClick={() => {
                            localStorage.removeItem('token');
                            setIsAuthenticated(false);
                        }}
                        style={{
                            padding: "6px 12px",
                            background: "#f3f4f6",
                            color: "#374151",
                            border: "1px solid #d1d5db",
                            borderRadius: "6px",
                            fontSize: 12,
                            fontWeight: 500,
                            cursor: "pointer"
                        }}
                    >
                        로그아웃
                    </button>
                </div>
            </header>

            <div style={{
                display: "flex",
                flex: 1,
                overflow: "hidden"
            }}>
                {/* 왼쪽 사이드바 */}
                <aside style={{
                    width: "220px",
                    minWidth: "200px",
                    background: "white",
                    borderRight: "1px solid #e2e8f0",
                    padding: "20px 0",
                    overflow: "auto"
                }}>
                    <div style={{ fontWeight: 800, fontSize: 16, padding: "12px 20px", marginBottom: 20, color: "#0ea5e9" }}>
                        EMR
                    </div>
                    <nav>
                        <div 
                            onClick={() => setCurrentPage('home')}
                            style={{ 
                                padding: "12px 20px", 
                                fontSize: 14, 
                                color: currentPage === 'home' ? "#0ea5e9" : "#64748b",
                                cursor: "pointer",
                                transition: "all 0.2s",
                                borderLeft: `3px solid ${currentPage === 'home' ? "#0ea5e9" : "transparent"}`,
                                background: currentPage === 'home' ? "#f0f9ff" : "transparent"
                            }}
                            onMouseEnter={(e) => {
                                if (currentPage !== 'home') {
                                    e.currentTarget.style.background = "#f1f5f9";
                                }
                            }}
                            onMouseLeave={(e) => {
                                if (currentPage !== 'home') {
                                    e.currentTarget.style.background = "transparent";
                                }
                            }}
                        >홈</div>
                        <div 
                            onClick={() => setCurrentPage('chart')}
                            style={{ 
                                padding: "12px 20px", 
                                fontSize: 14, 
                                color: currentPage === 'chart' ? "#0ea5e9" : "#64748b",
                                cursor: "pointer",
                                transition: "all 0.2s",
                                borderLeft: `3px solid ${currentPage === 'chart' ? "#0ea5e9" : "transparent"}`,
                                background: currentPage === 'chart' ? "#f0f9ff" : "transparent"
                            }}
                            onMouseEnter={(e) => {
                                if (currentPage !== 'chart') {
                                    e.currentTarget.style.background = "#f1f5f9";
                                }
                            }}
                            onMouseLeave={(e) => {
                                if (currentPage !== 'chart') {
                                    e.currentTarget.style.background = "transparent";
                                }
                            }}
                        >차트</div>
                        <div 
                            onClick={() => setCurrentPage('exam')}
                            style={{ 
                                padding: "12px 20px", 
                                fontSize: 14, 
                                color: currentPage === 'exam' ? "#0ea5e9" : "#64748b",
                                cursor: "pointer",
                                transition: "all 0.2s",
                                borderLeft: `3px solid ${currentPage === 'exam' ? "#0ea5e9" : "transparent"}`,
                                background: currentPage === 'exam' ? "#f0f9ff" : "transparent"
                            }}
                            onMouseEnter={(e) => {
                                if (currentPage !== 'exam') {
                                    e.currentTarget.style.background = "#f1f5f9";
                                }
                            }}
                            onMouseLeave={(e) => {
                                if (currentPage !== 'exam') {
                                    e.currentTarget.style.background = "transparent";
                                }
                            }}
                        >검사</div>
                        <div 
                            onClick={() => setCurrentPage('appointment')}
                            style={{ 
                                padding: "12px 20px", 
                                fontSize: 14, 
                                color: currentPage === 'appointment' ? "#0ea5e9" : "#64748b",
                                cursor: "pointer",
                                transition: "all 0.2s",
                                borderLeft: `3px solid ${currentPage === 'appointment' ? "#0ea5e9" : "transparent"}`,
                                background: currentPage === 'appointment' ? "#f0f9ff" : "transparent"
                            }}
                            onMouseEnter={(e) => {
                                if (currentPage !== 'appointment') {
                                    e.currentTarget.style.background = "#f1f5f9";
                                }
                            }}
                            onMouseLeave={(e) => {
                                if (currentPage !== 'appointment') {
                                    e.currentTarget.style.background = "transparent";
                                }
                            }}
                        >예약</div>
                        <div 
                            onClick={() => setCurrentPage('forms')}
                            style={{ 
                                padding: "12px 20px", 
                                fontSize: 14, 
                                color: currentPage === 'forms' ? "#0ea5e9" : "#64748b",
                                cursor: "pointer",
                                transition: "all 0.2s",
                                borderLeft: `3px solid ${currentPage === 'forms' ? "#0ea5e9" : "transparent"}`,
                                background: currentPage === 'forms' ? "#f0f9ff" : "transparent"
                            }}
                            onMouseEnter={(e) => {
                                if (currentPage !== 'forms') {
                                    e.currentTarget.style.background = "#f1f5f9";
                                }
                            }}
                            onMouseLeave={(e) => {
                                if (currentPage !== 'forms') {
                                    e.currentTarget.style.background = "transparent";
                                }
                            }}
                        >서식 / 문서</div>
                    </nav>
                </aside>

                {/* 메인 컨텐츠 */}
                <main style={{
                    flex: 1,
                    padding: "20px",
                    overflow: "auto",
                    minWidth: 0
                }}>
                    {currentPage === 'home' && (
                        <div style={{ 
                            display: "grid", 
                            gridTemplateColumns: "1fr 1fr", 
                            gap: "20px",
                            height: "100%"
                        }}>
                            {/* 왼쪽: 금일 대기 환자 */}
                            <div style={{ 
                                background: "white", 
                                borderRadius: "8px",
                                padding: "16px",
                                border: "1px solid #e5e7eb",
                                height: "fit-content"
                            }}>
                                <div style={{ 
                                    fontSize: "18px", 
                                    fontWeight: 700, 
                                    marginBottom: "16px",
                                    color: "#374151"
                                }}>
                                    금일 대기 환자
                                </div>
                                <div style={{ display: "grid", gap: "8px" }}>
                                    <div style={{ 
                                        display: "flex", 
                                        justifyContent: "space-between", 
                                        alignItems: "center", 
                                        padding: "12px 16px", 
                                        border: "1px solid #e5e7eb",
                                        borderRadius: "8px",
                                        background: "white"
                                    }}>
                                        <div>
                                            <strong style={{ color: "#d97706" }}>11:00</strong> - 김철수 - 당뇨 재진
                                            <div style={{ fontSize: "12px", color: "#6b7280", marginTop: 4 }}>
                                                고혈압 경고
                                            </div>
                                        </div>
                                        <button style={{ 
                                            fontSize: "12px", 
                                            padding: "6px 12px",
                                            background: "#f3f4f6",
                                            color: "#374151",
                                            border: "1px solid #d1d5db",
                                            borderRadius: "6px",
                                            cursor: "pointer"
                                        }}>
                                            진료 시작
                                        </button>
                                    </div>
                                    <div style={{ 
                                        display: "flex", 
                                        justifyContent: "space-between", 
                                        alignItems: "center", 
                                        padding: "12px 16px", 
                                        border: "1px solid #e5e7eb",
                                        borderRadius: "8px",
                                        background: "white"
                                    }}>
                                        <div>
                                            <strong style={{ color: "#374151" }}>11:15</strong> - 이지현 - 감기 증상
                                        </div>
                                        <button style={{ 
                                            fontSize: "12px", 
                                            padding: "6px 12px",
                                            background: "#f3f4f6",
                                            color: "#374151",
                                            border: "1px solid #d1d5db",
                                            borderRadius: "6px",
                                            cursor: "pointer"
                                        }}>
                                            진료 시작
                                        </button>
                                    </div>
                                    <div style={{ 
                                        display: "flex", 
                                        justifyContent: "space-between", 
                                        alignItems: "center", 
                                        padding: "12px 16px", 
                                        border: "1px solid #e5e7eb",
                                        borderRadius: "8px",
                                        background: "white"
                                    }}>
                                        <div>
                                            <strong style={{ color: "#374151" }}>11:30</strong> - 박민수 - 복통
                                        </div>
                                        <button style={{ 
                                            fontSize: "12px", 
                                            padding: "6px 12px",
                                            background: "#f3f4f6",
                                            color: "#374151",
                                            border: "1px solid #d1d5db",
                                            borderRadius: "6px",
                                            cursor: "pointer"
                                        }}>
                                            진료 시작
                                        </button>
                                    </div>
                                    <div style={{ 
                                        display: "flex", 
                                        justifyContent: "space-between", 
                                        alignItems: "center", 
                                        padding: "12px 16px", 
                                        border: "1px solid #e5e7eb",
                                        borderRadius: "8px",
                                        background: "white"
                                    }}>
                                        <div>
                                            <strong style={{ color: "#374151" }}>12:00</strong> - 최영희 - 두통
                                        </div>
                                        <button style={{ 
                                            fontSize: "12px", 
                                            padding: "6px 12px",
                                            background: "#f3f4f6",
                                            color: "#374151",
                                            border: "1px solid #d1d5db",
                                            borderRadius: "6px",
                                            cursor: "pointer"
                                        }}>
                                            진료 시작
                                        </button>
                                    </div>
                                    <div style={{ 
                                        display: "flex", 
                                        justifyContent: "space-between", 
                                        alignItems: "center", 
                                        padding: "12px 16px", 
                                        border: "1px solid #e5e7eb",
                                        borderRadius: "8px",
                                        background: "white"
                                    }}>
                                        <div>
                                            <strong style={{ color: "#dc2626" }}>14:00</strong> - 홍길동 - 고혈압 초진
                                            <div style={{ fontSize: "12px", color: "#6b7280", marginTop: 4 }}>
                                                약물 상호작용 위험
                                            </div>
                                        </div>
                                        <button style={{ 
                                            fontSize: "12px", 
                                            padding: "6px 12px",
                                            background: "#f3f4f6",
                                            color: "#374151",
                                            border: "1px solid #d1d5db",
                                            borderRadius: "6px",
                                            cursor: "pointer"
                                        }}>
                                            차트 보기
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            {/* 오른쪽: 금일 병원 일정 + 당일 처방/오더보드 */}
                            <div style={{ display: "grid", gap: "20px", alignContent: "start" }}>
                                {/* 금일 병원 일정 */}
                                <div style={{ 
                                    background: "white", 
                                    borderRadius: "8px",
                                    padding: "16px",
                                    border: "1px solid #e5e7eb",
                                    height: "fit-content"
                                }}>
                                    <div style={{ 
                                        fontSize: "18px", 
                                        fontWeight: 700, 
                                        marginBottom: "16px",
                                        color: "#374151"
                                    }}>
                                        금일 병원 일정
                                    </div>
                                    <div style={{ display: "grid", gap: "8px" }}>
                                        <div style={{ 
                                            display: "flex", 
                                            justifyContent: "space-between", 
                                            alignItems: "center", 
                                            padding: "12px 16px", 
                                            border: "1px solid #e5e7eb",
                                            borderRadius: "8px",
                                            background: "white"
                                        }}>
                                            <div>09:00-12:00 - 외래 진료</div>
                                            <span style={{ fontSize: "12px", color: "#6b7280" }}>진행 중</span>
                                        </div>
                                        <div style={{ 
                                            display: "flex", 
                                            justifyContent: "space-between", 
                                            alignItems: "center", 
                                            padding: "12px 16px", 
                                            border: "1px solid #e5e7eb",
                                            borderRadius: "8px",
                                            background: "white"
                                        }}>
                                            <div>12:00-13:00 - 점심 시간</div>
                                            <span style={{ fontSize: "12px", color: "#6b7280" }}>예정</span>
                                        </div>
                                        <div style={{ 
                                            display: "flex", 
                                            justifyContent: "space-between", 
                                            alignItems: "center", 
                                            padding: "12px 16px", 
                                            border: "1px solid #e5e7eb",
                                            borderRadius: "8px",
                                            background: "white"
                                        }}>
                                            <div>13:00-17:00 - 외래 진료</div>
                                            <span style={{ fontSize: "12px", color: "#6b7280" }}>예정</span>
                                        </div>
                                    </div>
                                </div>
                                
                                {/* 당일 처방/오더보드 */}
                                <div style={{ 
                                    background: "white", 
                                    borderRadius: "8px",
                                    padding: "16px",
                                    border: "1px solid #e5e7eb",
                                    height: "fit-content"
                                }}>
                                    <div style={{ 
                                        fontSize: "18px", 
                                        fontWeight: 700, 
                                        marginBottom: "16px",
                                        color: "#374151"
                                    }}>
                                        당일 처방/오더보드
                                    </div>
                                    <div style={{ display: "grid", gap: "8px" }}>
                                        <div style={{ 
                                            display: "flex", 
                                            justifyContent: "space-between", 
                                            alignItems: "center", 
                                            padding: "12px 16px", 
                                            border: "1px solid #e5e7eb",
                                            borderRadius: "8px",
                                            background: "white"
                                        }}>
                                            <div>
                                                김철수 - Metformin 500mg 1T bid
                                                <div style={{ fontSize: "12px", color: "#6b7280", marginTop: 4 }}>
                                                    10:30 처방
                                                </div>
                                            </div>
                                            <button style={{ 
                                                fontSize: "12px", 
                                                padding: "6px 12px",
                                                background: "#f3f4f6",
                                                color: "#374151",
                                                border: "1px solid #d1d5db",
                                                borderRadius: "6px",
                                                cursor: "pointer"
                                            }}>
                                                상세보기
                                            </button>
                                        </div>
                                        <div style={{ 
                                            display: "flex", 
                                            justifyContent: "space-between", 
                                            alignItems: "center", 
                                            padding: "12px 16px", 
                                            border: "1px solid #e5e7eb",
                                            borderRadius: "8px",
                                            background: "white"
                                        }}>
                                            <div>
                                                이지현 - CBC, Chest X-ray
                                                <div style={{ fontSize: "12px", color: "#6b7280", marginTop: 4 }}>
                                                    11:00 오더
                                                </div>
                                            </div>
                                            <button style={{ 
                                                fontSize: "12px", 
                                                padding: "6px 12px",
                                                background: "#f3f4f6",
                                                color: "#374151",
                                                border: "1px solid #d1d5db",
                                                borderRadius: "6px",
                                                cursor: "pointer"
                                            }}>
                                                상세보기
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    {currentPage === 'chart' && (
                        <div style={{ padding: "20px", textAlign: "center", color: "#6b7280" }}>
                            <h2>환자 차트</h2>
                            <p>환자 차트 기능이 곧 추가될 예정입니다.</p>
                        </div>
                    )}
                    
                    {currentPage === 'exam' && (
                        <div style={{ padding: "20px", textAlign: "center", color: "#6b7280" }}>
                            <h2>검사 관리</h2>
                            <p>검사 관리 기능이 곧 추가될 예정입니다.</p>
                        </div>
                    )}
                    
                    {currentPage === 'appointment' && (
                        <div style={{ padding: "20px", textAlign: "center", color: "#6b7280" }}>
                            <h2>예약 관리</h2>
                            <p>예약 관리 기능이 곧 추가될 예정입니다.</p>
                        </div>
                    )}
                    
                    {currentPage === 'forms' && (
                        <div style={{ padding: "20px", textAlign: "center", color: "#6b7280" }}>
                            <h2>서식 / 문서</h2>
                            <p>서식 및 문서 관리 기능이 곧 추가될 예정입니다.</p>
                        </div>
                    )}
                </main>

                {/* 오른쪽 사이드바 */}
                <aside style={{ 
                    width: "300px", 
                    background: "white", 
                    borderLeft: "1px solid #e5e7eb",
                    padding: "20px",
                    display: "flex",
                    flexDirection: "column",
                    gap: "20px"
                }}>
                    {/* 캘린더 */}
                    <div style={{ 
                        background: "white", 
                        borderRadius: "8px",
                        padding: "16px",
                        border: "1px solid #e5e7eb"
                    }}>
                        <div style={{ 
                            fontSize: "18px", 
                            fontWeight: 700, 
                            marginBottom: "16px",
                            color: "#374151"
                        }}>
                            캘린더
                        </div>
                        <div style={{ 
                            display: "grid", 
                            gridTemplateColumns: "repeat(7, 1fr)", 
                            gap: "4px",
                            textAlign: "center"
                        }}>
                            {['일', '월', '화', '수', '목', '금', '토'].map(day => (
                                <div key={day} style={{ 
                                    fontSize: "12px", 
                                    fontWeight: 600, 
                                    color: "#6b7280",
                                    padding: "8px"
                                }}>
                                    {day}
                                </div>
                            ))}
                            {Array.from({length: 35}, (_, i) => (
                                <div key={i} style={{ 
                                    fontSize: "12px", 
                                    padding: "8px",
                                    color: i < 23 ? "#374151" : "#d1d5db",
                                    cursor: "pointer",
                                    borderRadius: "4px"
                                }}>
                                    {i < 23 ? i + 1 : ''}
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* 빠른 액션 */}
                    <div style={{ 
                        background: "white", 
                        borderRadius: "8px",
                        padding: "16px",
                        border: "1px solid #e5e7eb"
                    }}>
                        <div style={{ 
                            fontSize: "18px", 
                            fontWeight: 700, 
                            marginBottom: "16px",
                            color: "#374151"
                        }}>
                            빠른 액션
                        </div>
                        <div style={{ display: "grid", gap: "8px" }}>
                            <button 
                                onClick={() => setShowNewPatientModal(true)}
                                style={{
                                    width: "100%",
                                    padding: "12px",
                                    background: "#f3f4f6",
                                    color: "#374151",
                                    border: "1px solid #d1d5db",
                                    borderRadius: "6px",
                                    fontSize: "14px",
                                    fontWeight: 500,
                                    cursor: "pointer"
                                }}
                            >
                                신규 환자 등록
                            </button>
                            <button style={{
                                width: "100%",
                                padding: "12px",
                                background: "#f3f4f6",
                                color: "#374151",
                                border: "1px solid #d1d5db",
                                borderRadius: "6px",
                                fontSize: "14px",
                                fontWeight: 500,
                                cursor: "pointer"
                            }}>
                                검사 결과 확인
                            </button>
                            <button style={{
                                width: "100%",
                                padding: "12px",
                                background: "#f3f4f6",
                                color: "#374151",
                                border: "1px solid #d1d5db",
                                borderRadius: "6px",
                                fontSize: "14px",
                                fontWeight: 500,
                                cursor: "pointer"
                            }}>
                                노트 작성
                            </button>
                            <button style={{
                                width: "100%",
                                padding: "12px",
                                background: "#f3f4f6",
                                color: "#374151",
                                border: "1px solid #d1d5db",
                                borderRadius: "6px",
                                fontSize: "14px",
                                fontWeight: 500,
                                cursor: "pointer"
                            }}>
                                예약 관리
                            </button>
                        </div>
                    </div>

                    {/* 미완료/최근알림 */}
                    <div style={{ 
                        background: "white", 
                        borderRadius: "8px",
                        padding: "16px",
                        border: "1px solid #e5e7eb"
                    }}>
                        <div style={{ 
                            fontSize: "18px", 
                            fontWeight: 700, 
                            marginBottom: "16px",
                            color: "#374151"
                        }}>
                            미완료/최근알림
                        </div>
                        <div style={{ display: "grid", gap: "8px" }}>
                            <div style={{ 
                                padding: "12px",
                                background: "#fef2f2",
                                border: "1px solid #fecaca",
                                borderRadius: "6px",
                                borderLeft: "4px solid #dc2626"
                            }}>
                                <div style={{ fontSize: "12px", fontWeight: 600, color: "#dc2626", marginBottom: "4px" }}>
                                    긴급
                                </div>
                                <div style={{ fontSize: "14px", color: "#374151" }}>
                                    홍길동 환자: 약물 상호작용 위험 (아스피린 + 와파린)
                                </div>
                            </div>
                            <div style={{ 
                                padding: "12px",
                                background: "#fffbeb",
                                border: "1px solid #fed7aa",
                                borderRadius: "6px",
                                borderLeft: "4px solid #d97706"
                            }}>
                                <div style={{ fontSize: "12px", fontWeight: 600, color: "#d97706", marginBottom: "4px" }}>
                                    주의
                                </div>
                                <div style={{ fontSize: "14px", color: "#374151" }}>
                                    김철수 환자: 고혈압 경고 (혈압 160/95)
                                </div>
                            </div>
                            <div style={{ fontSize: "14px", color: "#6b7280" }}>
                                미완료 노트 - 2건
                            </div>
                            <div style={{ fontSize: "14px", color: "#6b7280" }}>
                                검사 결과 대기 - 1건
                            </div>
                        </div>
                    </div>
                </aside>
            </div>

            {/* 신규 환자 모달 (새로운 디자인) */}
            {showNewPatientModal && (
                <div style={{
                    position: "fixed",
                    top: 0,
                    left: 0,
                    right: 0,
                    bottom: 0,
                    background: "rgba(0,0,0,0.5)",
                    display: "flex",
                    alignItems: "center",
                    justifyContent: "center",
                    zIndex: 1000
                }}>
                    <div style={{
                        background: "white",
                        borderRadius: "12px",
                        padding: "24px",
                        maxWidth: "1200px",
                        width: "95%",
                        maxHeight: "90vh",
                        overflow: "auto"
                    }}>
                        {/* 헤더 */}
                        <div style={{
                            display: "flex",
                            justifyContent: "space-between",
                            alignItems: "center",
                            marginBottom: "24px",
                            borderBottom: "1px solid #e5e7eb",
                            paddingBottom: "16px"
                        }}>
                            <h2 style={{ 
                                fontSize: "24px", 
                                fontWeight: 700, 
                                color: "#374151",
                                margin: 0
                            }}>
                                신규 환자 등록 - 초진
                            </h2>
                            <button
                                onClick={() => setShowNewPatientModal(false)}
                                style={{
                                    background: "none",
                                    border: "none",
                                    fontSize: "24px",
                                    cursor: "pointer",
                                    color: "#6b7280",
                                    padding: "4px"
                                }}
                            >
                                ×
                            </button>
                        </div>

                        {/* 메인 컨텐츠 */}
                        <div style={{ 
                            display: "grid", 
                            gridTemplateColumns: "1fr 1fr", 
                            gap: "24px"
                        }}>
                            {/* 왼쪽 컬럼 */}
                            <div style={{ display: "grid", gap: "20px" }}>
                                {/* 기본 정보 */}
                                <div style={{ 
                                    background: "#f9fafb", 
                                    borderRadius: "8px",
                                    padding: "20px",
                                    border: "1px solid #e5e7eb"
                                }}>
                                    <h3 style={{ 
                                        fontSize: "18px", 
                                        fontWeight: 600, 
                                        marginBottom: "16px",
                                        color: "#374151"
                                    }}>
                                        기본 정보
                                    </h3>
                                    <div style={{ display: "grid", gap: "16px" }}>
                                        {/* 1행: MRN, 이름, 성별 */}
                                        <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr 1fr", gap: "12px" }}>
                                            <div>
                                                <label style={{ 
                                                    display: "block", 
                                                    fontSize: "14px", 
                                                    fontWeight: 500, 
                                                    marginBottom: "6px",
                                                    color: "#374151"
                                                }}>
                                                    MRN
                                                </label>
                                                <input 
                                                    type="text" 
                                                    placeholder="예: P0004" 
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                            <div>
                                                <label style={{ 
                                                    display: "block", 
                                                    fontSize: "14px", 
                                                    fontWeight: 500, 
                                                    marginBottom: "6px",
                                                    color: "#374151"
                                                }}>
                                                    이름
                                                </label>
                                                <input 
                                                    type="text" 
                                                    placeholder="예: 이지현" 
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                            <div>
                                                <label style={{ 
                                                    display: "block", 
                                                    fontSize: "14px", 
                                                    fontWeight: 500, 
                                                    marginBottom: "6px",
                                                    color: "#374151"
                                                }}>
                                                    성별
                                                </label>
                                                <select style={{
                                                    width: "100%",
                                                    padding: "8px 12px",
                                                    border: "1px solid #d1d5db",
                                                    borderRadius: "6px",
                                                    fontSize: "14px",
                                                    background: "white"
                                                }}>
                                                    <option value="">선택</option>
                                                    <option value="male">남성</option>
                                                    <option value="female">여성</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        {/* 2행: 생년월일, 전화번호 */}
                                        <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: "12px" }}>
                                            <div>
                                                <label style={{ 
                                                    display: "block", 
                                                    fontSize: "14px", 
                                                    fontWeight: 500, 
                                                    marginBottom: "6px",
                                                    color: "#374151"
                                                }}>
                                                    생년월일
                                                </label>
                                                <input 
                                                    type="date" 
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                            <div>
                                                <label style={{ 
                                                    display: "block", 
                                                    fontSize: "14px", 
                                                    fontWeight: 500, 
                                                    marginBottom: "6px",
                                                    color: "#374151"
                                                }}>
                                                    전화번호
                                                </label>
                                                <input 
                                                    type="tel" 
                                                    placeholder="010-1234-5678" 
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                        </div>
                                        
                                        {/* 3행: 보호자 이름, 보호자 전화번호 */}
                                        <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: "12px" }}>
                                            <div>
                                                <label style={{ 
                                                    display: "block", 
                                                    fontSize: "14px", 
                                                    fontWeight: 500, 
                                                    marginBottom: "6px",
                                                    color: "#374151"
                                                }}>
                                                    보호자 이름
                                                </label>
                                                <input 
                                                    type="text" 
                                                    placeholder="예: 김철수 (아버지)" 
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                            <div>
                                                <label style={{ 
                                                    display: "block", 
                                                    fontSize: "14px", 
                                                    fontWeight: 500, 
                                                    marginBottom: "6px",
                                                    color: "#374151"
                                                }}>
                                                    보호자 전화번호
                                                </label>
                                                <input 
                                                    type="tel" 
                                                    placeholder="010-9876-5432" 
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                        </div>
                                        
                                        {/* 4행: 주소 */}
                                        <div>
                                            <label style={{ 
                                                display: "block", 
                                                fontSize: "14px", 
                                                fontWeight: 500, 
                                                marginBottom: "6px",
                                                color: "#374151"
                                            }}>
                                                주소
                                            </label>
                                            <input 
                                                type="text" 
                                                placeholder="서울시 강남구..." 
                                                style={{
                                                    width: "100%",
                                                    padding: "8px 12px",
                                                    border: "1px solid #d1d5db",
                                                    borderRadius: "6px",
                                                    fontSize: "14px"
                                                }}
                                            />
                                        </div>
                                    </div>
                                    
                                    {/* 기본정보 저장 버튼 */}
                                    <div style={{ marginTop: "16px", textAlign: "right" }}>
                                        <button style={{
                                            padding: "8px 16px",
                                            background: "#3b82f6",
                                            color: "white",
                                            border: "none",
                                            borderRadius: "6px",
                                            fontSize: "14px",
                                            fontWeight: 500,
                                            cursor: "pointer"
                                        }}>
                                            기본정보 저장
                                        </button>
                                    </div>
                                </div>
                                            <div>
                                                <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                    이름
                                                </label>
                                                <input
                                                    type="text"
                                                    placeholder="예: 이지현"
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                        </div>
                                        <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: "16px" }}>
                                            <div>
                                                <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                    성별
                                                </label>
                                                <select
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px",
                                                        background: "white"
                                                    }}
                                                >
                                                    <option value="">선택</option>
                                                    <option value="남성">남성</option>
                                                    <option value="여성">여성</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                    생년월일
                                                </label>
                                                <input
                                                    type="date"
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                        </div>
                                        <div>
                                            <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                전화번호
                                            </label>
                                            <input
                                                type="tel"
                                                placeholder="010-1234-5678"
                                                style={{
                                                    width: "100%",
                                                    padding: "8px 12px",
                                                    border: "1px solid #d1d5db",
                                                    borderRadius: "6px",
                                                    fontSize: "14px"
                                                }}
                                            />
                                        </div>
                                        <div>
                                            <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                주소
                                            </label>
                                            <input
                                                type="text"
                                                placeholder="서울시 강남구..."
                                                style={{
                                                    width: "100%",
                                                    padding: "8px 12px",
                                                    border: "1px solid #d1d5db",
                                                    borderRadius: "6px",
                                                    fontSize: "14px"
                                                }}
                                            />
                                        </div>
                                    </div>
                                </div>

                                {/* 바이탈 입력 */}
                                <div style={{ 
                                    background: "white", 
                                    borderRadius: "8px",
                                    padding: "20px",
                                    border: "2px solid #e5e7eb",
                                    height: "fit-content",
                                    boxShadow: "0 2px 4px rgba(0,0,0,0.1)"
                                }}>
                                    <div style={{ 
                                        fontSize: "18px", 
                                        fontWeight: 700, 
                                        marginBottom: "16px",
                                        color: "#374151"
                                    }}>
                                        바이탈 입력
                                    </div>
                                    <div style={{ display: "grid", gap: "16px" }}>
                                        <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: "16px" }}>
                                            <div>
                                                <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                    체온
                                                </label>
                                                <input
                                                    type="text"
                                                    placeholder="36.5"
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                            <div>
                                                <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                    혈압
                                                </label>
                                                <input
                                                    type="text"
                                                    placeholder="120/80"
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                        </div>
                                        <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: "16px" }}>
                                            <div>
                                                <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                    맥박
                                                </label>
                                                <input
                                                    type="text"
                                                    placeholder="72"
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                            <div>
                                                <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                    체중
                                                </label>
                                                <input
                                                    type="text"
                                                    placeholder="65"
                                                    style={{
                                                        width: "100%",
                                                        padding: "8px 12px",
                                                        border: "1px solid #d1d5db",
                                                        borderRadius: "6px",
                                                        fontSize: "14px"
                                                    }}
                                                />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* 오른쪽 컬럼 */}
                            <div style={{ display: "grid", gap: "20px" }}>
                                {/* 방문정보 */}
                                <div style={{ 
                                    background: "white", 
                                    borderRadius: "8px",
                                    padding: "20px",
                                    border: "2px solid #e5e7eb",
                                    height: "fit-content",
                                    boxShadow: "0 2px 4px rgba(0,0,0,0.1)"
                                }}>
                                    <div style={{ 
                                        fontSize: "18px", 
                                        fontWeight: 700, 
                                        marginBottom: "16px",
                                        color: "#374151"
                                    }}>
                                        방문정보
                                    </div>
                                    <div style={{ display: "grid", gap: "16px" }}>
                                        <div>
                                            <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                방문 유형
                                            </label>
                                            <select
                                                style={{
                                                    width: "100%",
                                                    padding: "8px 12px",
                                                    border: "1px solid #d1d5db",
                                                    borderRadius: "6px",
                                                    fontSize: "14px",
                                                    background: "white"
                                                }}
                                            >
                                                <option value="">선택</option>
                                                <option value="초진">초진</option>
                                                <option value="재진">재진</option>
                                                <option value="응급">응급</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                주요 증상
                                            </label>
                                            <textarea
                                                placeholder="어디가 아파서 오셨나요? (예: 두통, 복통, 발열 등)"
                                                style={{
                                                    width: "100%",
                                                    minHeight: "80px",
                                                    padding: "8px 12px",
                                                    border: "1px solid #d1d5db",
                                                    borderRadius: "6px",
                                                    fontSize: "14px",
                                                    resize: "vertical"
                                                }}
                                            />
                                        </div>
                                        <div>
                                            <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                증상 기간
                                            </label>
                                            <input
                                                type="text"
                                                placeholder="예: 3일 전부터"
                                                style={{
                                                    width: "100%",
                                                    padding: "8px 12px",
                                                    border: "1px solid #d1d5db",
                                                    borderRadius: "6px",
                                                    fontSize: "14px"
                                                }}
                                            />
                                        </div>
                                        <div>
                                            <label style={{ fontSize: "14px", fontWeight: 500, color: "#374151", marginBottom: "4px", display: "block" }}>
                                                과거력
                                            </label>
                                            <textarea
                                                placeholder="과거에 앓았던 질병이나 수술 경험"
                                                style={{
                                                    width: "100%",
                                                    minHeight: "80px",
                                                    padding: "8px 12px",
                                                    border: "1px solid #d1d5db",
                                                    borderRadius: "6px",
                                                    fontSize: "14px",
                                                    resize: "vertical"
                                                }}
                                            />
                                        </div>
                                    </div>
                                </div>

                                {/* 노트 */}
                                <div style={{ 
                                    background: "white", 
                                    borderRadius: "8px",
                                    padding: "20px",
                                    border: "2px solid #e5e7eb",
                                    height: "fit-content",
                                    boxShadow: "0 2px 4px rgba(0,0,0,0.1)"
                                }}>
                                    <div style={{ 
                                        fontSize: "18px", 
                                        fontWeight: 700, 
                                        marginBottom: "16px",
                                        color: "#374151"
                                    }}>
                                        노트
                                    </div>
                                    <div>
                                        <textarea
                                            placeholder="AI 요약된 내용이 여기에 표시됩니다..."
                                            style={{
                                                width: "100%",
                                                minHeight: "120px",
                                                padding: "8px 12px",
                                                border: "1px solid #d1d5db",
                                                borderRadius: "6px",
                                                fontSize: "14px",
                                                resize: "vertical"
                                            }}
                                        />
                                    </div>
                                </div>
                            </div>
                        </div>

                        {/* 하단 버튼 */}
                        <div style={{ 
                            display: "flex", 
                            justifyContent: "space-between", 
                            alignItems: "center",
                            padding: "16px 0 0 0",
                            borderTop: "1px solid #e5e7eb",
                            marginTop: "24px"
                        }}>
                            <div style={{ fontSize: "14px", color: "#6b7280" }}>
                                * 모든 필수 항목을 입력한 후 등록해주세요.
                            </div>
                            <div style={{ display: "flex", gap: "12px" }}>
                                <button
                                    onClick={() => setShowNewPatientModal(false)}
                                    style={{
                                        padding: "8px 16px",
                                        background: "#f3f4f6",
                                        color: "#374151",
                                        border: "1px solid #d1d5db",
                                        borderRadius: "6px",
                                        cursor: "pointer",
                                        fontSize: "14px",
                                        fontWeight: 500
                                    }}
                                >
                                    취소
                                </button>
                                <button
                                    onClick={() => {
                                        alert('환자가 등록되었습니다!');
                                        setShowNewPatientModal(false);
                                    }}
                                    style={{
                                        padding: "8px 16px",
                                        background: "#3b82f6",
                                        color: "white",
                                        border: "1px solid #3b82f6",
                                        borderRadius: "6px",
                                        cursor: "pointer",
                                        fontSize: "14px",
                                        fontWeight: 500
                                    }}
                                >
                                    환자 등록 완료
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            )}
        </div>
    );
}